#! /usr/bin/env python

"""
Dumps the inventory tree into ``<VarDirectory>/cache/<SITE>/<NAME>.pkl``.
If the ``[NAME]`` argument is not given, defaults to ``inventory.pkl``.
"""

__usage__ = '%prog [options] [NAME]'

from dynamo_consistency import inventorylister
from dynamo_consistency import opts
from dynamo_consistency import args
from dynamo_consistency.parser import pretty_exe

pretty_exe('consistency-dump-tree')

if __name__ == '__main__':
    inventorylister.listing(opts.SITE_PATTERN, cache=args[1] if len(args) > 1 else 'inventory') # pylint: disable=unexpected-keyword-arg
